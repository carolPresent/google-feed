{"version":3,"sources":["../database.js"],"names":["mongoose","require","Schema","Promise","global","init","dbLink","connect","useNewUrlParser","catch","err","logger","WriteToLog","FeedSchema","Data","type","String","trim","required","Type","TokenSchema","AccessToken","RefreshToken","Scope","TokenType","IdToken","index","ExpiryDate","Number","User","ObjectId","ref","UserSchema","Id","unique","Email","Token","Feed","model","module","exports","Init"],"mappings":";;AAAA,IAAMA,WAASC,QAAQ,UAAR,CAAf;AACA,IAAIC,SAAOF,SAASE,MAApB;;AAEAF,SAASG,OAAT,GAAiBC,OAAOD,OAAxB;;AAEA,IAAIE,OAAK,SAALA,IAAK,CAASC,MAAT,EAAgB;AACrBN,aAASO,OAAT,CAAiBD,MAAjB,EAAwB,EAAEE,iBAAiB,IAAnB,EAAxB,EAAmDC,KAAnD,CAAyD,UAASC,GAAT,EAAa;AAClEC,eAAOC,UAAP,+DAA8EF,GAA9E;AACH,KAFD;AAGH,CAJD;;AAMA,IAAIG,aAAW,IAAIX,MAAJ,CAAW;AACtBY,UAAK;AACDC,cAAKC,MADJ;AAEDC,cAAK,IAFJ;AAGDC,kBAAS;AAHR,KADiB;AAMtBC,UAAK;AACDJ,cAAKC,MADJ;AAEDC,cAAK;AAFJ;AANiB,CAAX,CAAf;;AAYA,IAAIG,cAAY,IAAIlB,MAAJ,CAAW;AACvBmB,iBAAY;AACRN,cAAKC;AADG,KADW;AAIvBM,kBAAa;AACTP,cAAKC;AADI,KAJU;AAOvBO,WAAM;AACFR,cAAKC;AADH,KAPiB;AAUvBQ,eAAU;AACNT,cAAKC;AADC,KAVa;AAavBS,aAAQ;AACJV,cAAKC,MADD;AAEJU,eAAM;AAFF,KAbe;AAiBvBC,gBAAW;AACPZ,cAAKa;AADE,KAjBY;AAoBvBC,UAAK;AACDd,cAAKb,OAAO4B,QADX;AAEDC,aAAI;AAFH;AApBkB,CAAX,CAAhB;;AA0BA,IAAIC,aAAW,IAAI9B,MAAJ,CAAW;AACtB+B,QAAG;AACClB,cAAKa,MADN;AAECM,gBAAO;AAFR,KADmB;AAKtBC,WAAM;AACFpB,cAAKC,MADH;AAEFkB,gBAAO;AAFL,KALgB;AAStBE,WAAM;AACFrB,cAAKb,OAAO4B,QADV;AAEFC,aAAI;AAFF;AATgB,CAAX,CAAf;;AAeA,IAAIM,OAAKrC,SAASsC,KAAT,CAAe,MAAf,EAAsBzB,UAAtB,CAAT;AACA,IAAIuB,QAAMpC,SAASsC,KAAT,CAAe,OAAf,EAAuBlB,WAAvB,CAAV;AACA,IAAIS,OAAK7B,SAASsC,KAAT,CAAe,MAAf,EAAsBN,UAAtB,CAAT;;AAEAO,OAAOC,OAAP,GAAe;AACXC,UAAKpC,IADM;AAEXgC,cAFW;AAGXD,gBAHW;AAIXP;AAJW,CAAf","file":"database.js","sourcesContent":["const mongoose=require('mongoose');\nvar Schema=mongoose.Schema;\n\nmongoose.Promise=global.Promise;\n\nvar init=function(dbLink){\n    mongoose.connect(dbLink,{ useNewUrlParser: true }).catch(function(err){\n        logger.WriteToLog(`Error occurred while establishing connection to mongo db ${err}`);\n    });\n}\n\nvar FeedSchema=new Schema({\n    Data:{\n        type:String,\n        trim:true,\n        required:true\n    },\n    Type:{\n        type:String,\n        trim:true\n    }\n});\n\nvar TokenSchema=new Schema({\n    AccessToken:{\n        type:String\n    },\n    RefreshToken:{\n        type:String\n    },\n    Scope:{\n        type:String\n    },\n    TokenType:{\n        type:String\n    },\n    IdToken:{\n        type:String,\n        index:true\n    },\n    ExpiryDate:{\n        type:Number\n    },\n    User:{\n        type:Schema.ObjectId,\n        ref:'User'\n    }\n});\n\nvar UserSchema=new Schema({\n    Id:{\n        type:Number,\n        unique:true\n    },\n    Email:{\n        type:String,\n        unique:true\n    },\n    Token:{\n        type:Schema.ObjectId,\n        ref:'Token'\n    }\n});\n\nvar Feed=mongoose.model(\"Feed\",FeedSchema);\nvar Token=mongoose.model(\"Token\",TokenSchema);\nvar User=mongoose.model(\"User\",UserSchema);\n\nmodule.exports={\n    Init:init,\n    Feed,\n    Token,\n    User\n};"]}