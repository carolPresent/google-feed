{"version":3,"sources":["../feed-service.js"],"names":["Repository","require","Database","getFeeds","getMany","Feed","IsOccupied","feeds","slice","index","length","save","unlockFeeds","feedIds","CreateObjectId","_id","$in","addFeed","feed","newFeedModel","Data","Type","saveOne","feedAddStatus","module","exports","GetFeeds","UnlockFeeds","AddFeed"],"mappings":";;;;AAAA,IAAIA,aAAWC,QAAQ,eAAR,CAAf;AACA,IAAIC,WAASD,QAAQ,YAAR,CAAb;;AAEA,IAAIE;AAAA,uEAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEOH,WAAWI,OAAX,CAAmBF,SAASG,IAA5B,EAAiC,EAACC,YAAW,KAAZ,EAAjC,CAFP;;AAAA;AAELC,6BAFK;;;AAITA,gCAAMA,MAAMC,KAAN,CAAY,CAAZ,EAAc,CAAd,CAAN;;AAEQC,6BANC,GAMK,CANL;;AAAA;AAAA,8BAMOA,QAAMF,MAAMG,MANnB;AAAA;AAAA;AAAA;;AAOLH,8BAAME,KAAN,EAAaH,UAAb,GAAwB,IAAxB;;AAPK;AAAA,+BASCC,MAAME,KAAN,EAAaE,IAAb,EATD;;AAAA;AAM0BF,+BAN1B;AAAA;AAAA;;AAAA;AAAA,yDAYFF,KAZE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAT;;AAAA;AAAA;AAAA;AAAA,GAAJ;;AAgBA,IAAIK;AAAA,wEAAY,kBAAOC,OAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAEZ,6BAAQJ,KAAR,GAAc,CAAd,EAAgBA,QAAMI,QAAQH,MAA9B,EAAqCD,OAArC,EAA6C;AACzCI,oCAAQJ,KAAR,IAAeP,SAASY,cAAT,CAAwBD,QAAQJ,KAAR,CAAxB,CAAf;AACH;;AAJW;AAAA,+BAMIT,WAAWI,OAAX,CAAmBF,SAASG,IAA5B,EAAiC,EAACU,KAAI,EAACC,KAAIH,OAAL,EAAL,EAAjC,CANJ;;AAAA;AAMRN,6BANQ;AAQJE,8BARI,GAQE,CARF;;AAAA;AAAA,8BAQIA,SAAMF,MAAMG,MARhB;AAAA;AAAA;AAAA;;AASRH,8BAAME,MAAN,EAAaH,UAAb,GAAwB,KAAxB;;AATQ;AAAA,+BAWFC,MAAME,MAAN,EAAaE,IAAb,EAXE;;AAAA;AAQuBF,gCARvB;AAAA;AAAA;;AAAA;AAAA,0DAcL,wBAdK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA;AAAA;AAAA;AAAA,GAAJ;;AAkBA,IAAIQ;AAAA,wEAAQ,kBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAEJC,oCAFI,GAES,IAAIjB,SAASG,IAAb,CAAkB;AAC/Be,kCAAKF,KAAKE,IADqB;AAE/BC,kCAAKH,KAAKG;AAFqB,yBAAlB,CAFT;AAAA;AAAA,+BAOgBrB,WAAWsB,OAAX,CAAmBH,YAAnB,CAPhB;;AAAA;AAOJI,qCAPI;AAAA,0DASD,yBATC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAR;;AAAA;AAAA;AAAA;AAAA,GAAJ;;AAaAC,OAAOC,OAAP,GAAe;AACXC,cAASvB,QADE;AAEXwB,iBAAYf,WAFD;AAGXgB,aAAQX;AAHG,CAAf","file":"feed-service.js","sourcesContent":["var Repository=require('./dbfunctions');\nvar Database=require('./database');\n\nvar getFeeds=async ()=>{\n\n    let feeds=await Repository.getMany(Database.Feed,{IsOccupied:false});\n\n    feeds=feeds.slice(0,5);\n\n    for(let index=0;index<feeds.length;index++){\n        feeds[index].IsOccupied=true;\n\n        await feeds[index].save();\n    }\n\n    return feeds;\n\n}\n\nvar unlockFeeds=async (feedIds)=>{\n\n    for(let index=0;index<feedIds.length;index++){\n        feedIds[index]=Database.CreateObjectId(feedIds[index]);\n    }\n\n    let feeds=await Repository.getMany(Database.Feed,{_id:{$in:feedIds}});\n\n    for(let index=0;index<feeds.length;index++){\n        feeds[index].IsOccupied=false;\n\n        await feeds[index].save();\n    }\n\n    return \"Unloacked successfully\";\n\n}\n\nvar addFeed=async(feed)=>{\n\n    var newFeedModel=new Database.Feed({\n        Data:feed.Data,\n        Type:feed.Type\n    });\n\n    let feedAddStatus=await Repository.saveOne(newFeedModel);\n\n    return \"Added feed successfully\";\n\n}\n\nmodule.exports={\n    GetFeeds:getFeeds,\n    UnlockFeeds:unlockFeeds,\n    AddFeed:addFeed\n}"]}