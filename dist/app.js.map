{"version":3,"sources":["../app.js"],"names":["express","require","bodyParser","http","app","use","json","portNumber","process","env","PORT","database","googleapis","feedService","mongoDbUri","Init","get","req","res","send","UrlGoogle","sendFile","root","__dirname","post","AddFeed","body","status","put","UnlockFeeds","FeedIds","GetGoogleAccountFromCode","query","code","server","createServer","listen","console","log","err","Utility","Logger","WriteToLog","Error"],"mappings":"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","file":"app.js","sourcesContent":["const express=require('express');\nconst bodyParser=require('body-parser');\nconst http=require('http');\n\nvar app=express();\n\napp.use(bodyParser.json());\n\nvar portNumber=process.env.PORT || 4242;\nvar database=require('./database');\nvar googleapis=require('./googleapis');\nvar feedService=require('./feed-service');\nvar mongoDbUri=\"mongodb://heroku_r07skxkq:f5q4s0fnq1hcpep0lf3n76omnh@ds117849.mlab.com:17849/heroku_r07skxkq\";\n//mongoDbUri=\"mongodb://localhost:27017/GoogleFeed\";\ndatabase.Init(mongoDbUri);\n/*\napp.use(async (req,res,next)=>{\n\n    try\n    {\n        var requestData=`Request:\\nUrl:${req.url}\\nMethod:${req.method}\\nBody:${req.body}\\n*******************************`;\n\n        Utility.Logger.WriteToLog(requestData);\n        let response=await Services.Gatekeeper.Serve(req);\n\n        if(!Utility.Dto.IsGoodResponse(response)){\n            res.send(response);\n            return;\n        }\n\n        next();\n    }\n    catch(err)\n    {\n        Utility.Logger.WriteToLog(err);\n        res.status(500).send(\"Internal server error\");\n    }\n\n});\n*/\n\napp.get('/heartbeat',(req,res)=>{\n    res.send('Api is live');\n});\n\napp.get('/signinurl',(req,res)=>{\n    res.send(googleapis.UrlGoogle());\n});\n\napp.get('/feed',(req,res)=>{\n    res.sendFile(\"/feed.html\",{root:__dirname});\n});\n\napp.get('/temp',(req,res)=>{\n    res.sendFile(\"/temp.html\",{root:__dirname});\n});\n\napp.post('/feed',async (req,res)=>{\n\n    try\n    {\n        res.send(await feedService.AddFeed(req.body));\n    }\n    catch(err)\n    {\n        res.status(500).send(\"Internal server error\");\n    }\n\n});\n\napp.put('/feed',async (req,res)=>{\n    try\n    {\n        res.send(await feedService.UnlockFeeds(req.body.FeedIds));\n    }\n    catch(err)\n    {\n        res.status(500).send(\"Internal server error\");\n    }\n});\n\napp.post('/loginSave',async (req,res)=>{\n\n    try\n    {\n        res.send(await googleapis.GetGoogleAccountFromCode(req.query.code));\n    }\n    catch(err)\n    {\n        res.status(500).send(\"Internal server error\");\n    }\n\n});\n\napp.get(\"/\",(req,res)=>{\n    res.sendFile(\"/index.html\",{root:__dirname});\n});\n\nvar server=http.createServer(app);\n\nserver.listen(portNumber, () => {\n    try\n    {\n        console.log(`Server is up and running on port: ${portNumber}`);\n    }\n    catch(err)\n    {\n        Utility.Logger.WriteToLog(err);\n        throw Error(err);\n    }\n\n});\n"]}